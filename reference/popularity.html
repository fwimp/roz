<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get popularity for a set of ott IDs — popularity • roz</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get popularity for a set of ott IDs — popularity"><meta name="description" content="Retrieve popularity indices from onezoom for a set of Open Tree of Life IDs. See https://www.onezoom.org/popularity for full methodology."><meta property="og:description" content="Retrieve popularity indices from onezoom for a set of Open Tree of Life IDs. See https://www.onezoom.org/popularity for full methodology."><meta property="og:image" content="https://fwimp.github.io/roz/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">roz</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fwimp/roz/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Get popularity for a set of ott IDs</h1>
      <small class="dont-index">Source: <a href="https://github.com/fwimp/roz/blob/master/R/popularity.R" class="external-link"><code>R/popularity.R</code></a></small>
      <div class="d-none name"><code>popularity.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Retrieve popularity indices from onezoom for a set of Open Tree of Life IDs. See <a href="https://www.onezoom.org/popularity" class="external-link">https://www.onezoom.org/popularity</a> for full methodology.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">popularity</span><span class="op">(</span></span>
<span>  <span class="va">otts</span>,</span>
<span>  maxtaxa <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  expand <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  spread_evenly <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  taxon_names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_raw <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sort <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  rate <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  key <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  basereq <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-otts">otts<a class="anchor" aria-label="anchor" href="#arg-otts"></a></dt>
<dd><p>a numeric ID or numeric vector of ott ids indicating the particular taxa to evaluate.</p></dd>


<dt id="arg-maxtaxa">maxtaxa<a class="anchor" aria-label="anchor" href="#arg-maxtaxa"></a></dt>
<dd><p>An integer giving the maximum number of taxa to return.
By default this is equivalent to the number of OTTs passed in: if expand_taxa is <code>TRUE</code>, you may wish to set this to a higher value.
There is an upper limit on the maximum number of taxa you can ask for, which is determined by your API key.</p></dd>


<dt id="arg-expand">expand<a class="anchor" aria-label="anchor" href="#arg-expand"></a></dt>
<dd><p>Include all species which are descendants of the given OTTs (i.e. higher level taxa are "expanded" into their constituent species, and the returned taxa are all at the species level).
You can mix OTTs for species and higher taxa in a single call: only higher taxa will be expanded.
If the parameter is <code>FALSE</code> or not given, do not expand taxa and simply return data on the OTTs that have been passed in (note that higher level taxa will not contain popularity_rank information, which is only valid for species).</p></dd>


<dt id="arg-spread-evenly">spread_evenly<a class="anchor" aria-label="anchor" href="#arg-spread-evenly"></a></dt>
<dd><p>Divide the maximum number of taxa to return (e.g. as given by the max parameter) so that each of the N taxa that are passed in are limited to the top (max÷N) most popular species.
Results are then combined and re-sorted, meaning that the final list of taxa returned may well contain fewer species than max.
This only really makes sense when <code>expand=TRUE</code>.</p></dd>


<dt id="arg-taxon-names">taxon_names<a class="anchor" aria-label="anchor" href="#arg-taxon-names"></a></dt>
<dd><p>Return a scientific (Latin) name for each returned taxon, if one is available. Names are usually (but not necessarily) the same as the scientific name listed on the Open Tree of Life.</p></dd>


<dt id="arg-include-raw">include_raw<a class="anchor" aria-label="anchor" href="#arg-include-raw"></a></dt>
<dd><p>Also return the raw (non-phylogenetically informed) score for each taxon.</p></dd>


<dt id="arg-sort">sort<a class="anchor" aria-label="anchor" href="#arg-sort"></a></dt>
<dd><p>If this is set to <code>rank</code> or <code>raw</code> then do not order species by phylogenetic popularity score then OTT id (as is the default), but instead use an alternative order.
If <code>raw</code>, then use the raw (non-phylogenetic) score, which may be zero or absent for some taxa such as these with no wikipedia page (the raw score is also returned, in the same way as it is when setting <code>include_raw=TRUE</code>).
If <code>rank</code>, then order by species rank (lowest first, with higher level taxa at start) then by plain popularity score (highest first), and finally by OTT id. Since only species (not higher taxa) have a rank, this necessarily puts all species first.</p></dd>


<dt id="arg-rate">rate<a class="anchor" aria-label="anchor" href="#arg-rate"></a></dt>
<dd><p>maximum number of calls to the API per second.</p></dd>


<dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>your OneZoom API key (defaults to the public key of <code>0</code> if not specified).</p></dd>


<dt id="arg-basereq">basereq<a class="anchor" aria-label="anchor" href="#arg-basereq"></a></dt>
<dd><p>an <a href="https://httr2.r-lib.org/reference/request.html" class="external-link">httr2 request</a> object, as generated by <code><a href="oz_basereq.html">oz_basereq()</a></code>. If <code>NA</code>, uses the default request.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame of the input otts alongside their popularity and popularity rank.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Francis Windram</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">popularity</span><span class="op">(</span><span class="fl">247341</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">popularity</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">247341</span>, <span class="fl">563159</span>, <span class="fl">269666</span>, <span class="fl">504327</span>, <span class="fl">668392</span><span class="op">)</span>, rate<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">popularity</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">247341</span>, <span class="fl">563159</span>, <span class="fl">269666</span>, <span class="fl">504327</span>, <span class="fl">668392</span><span class="op">)</span>, expand<span class="op">=</span><span class="cn">TRUE</span>, spread_evenly<span class="op">=</span><span class="cn">TRUE</span>, rate<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Francis Windram.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

